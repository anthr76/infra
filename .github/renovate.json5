{
  extends: [
    'github>bjw-s/renovate-config',
  ],
  enabled: true,
  timezone: 'America/New_York',
  semanticCommits: 'enabled',
  dependencyDashboard: true,
  dependencyDashboardTitle: 'Renovate Dashboard ðŸ¤–',
  commitBody: 'Signed-off-by: Anthony Rabbito <hello@anthonyrabbito.com>',
  suppressNotifications: [
    'prIgnoreNotification',
  ],
  rebaseWhen: 'conflicted',
  commitBodyTable: true,
  commitMessageTopic: '{{depName}}',
  commitMessageExtra: 'to {{newVersion}}',
  commitMessageSuffix: '',
  flux: {
    managerFilePatterns: [
      '/k8s/.+\\.yaml$/',
    ],
  },
  'helm-values': {
    managerFilePatterns: [
      '/k8s/.+\\.yaml$/',
    ],
  },
  kubernetes: {
    managerFilePatterns: [
      '/k8s/.+\\.yaml$/',
    ],
  },
  customManagers: [
    {
      customType: 'regex',
      description: 'Process Tekton bucket dependencies',
      managerFilePatterns: [
        '/kubernetes/.+\\.ya?ml$/',
      ],
      matchStrings: [
        '#\\s?renovate: depName=(?<depName>.*?)\\s?.*/previous/(?<currentValue>[\\w\\d\\.\\-_]+)/',
      ],
      datasourceTemplate: 'github-releases',
    },
    {
      customType: 'regex',
      description: [
        'Process CRD dependencies - Chart and Github Release are the same version',
      ],
      managerFilePatterns: [
        '/kubernetes/.+\\.ya?ml$/',
      ],
      matchStrings: [
        '# renovate: registryUrl=(?<registryUrl>\\S+) chart=(?<depName>\\S+)\n.*?(?<currentValue>[^-\\s]*)\n',
      ],
      datasourceTemplate: 'helm',
    },
    {
      customType: 'regex',
      description: [
        'Generic Docker image Regex manager',
      ],
      managerFilePatterns: [
        '/infrastructure/.+\\.ya?ml$/',
      ],
      matchStrings: [
        '# renovate: docker-image( versioning=(?<versioning>.*=?))?\n .*: (?<depName>.*?):(?<currentValue>.*=?)',
      ],
      datasourceTemplate: 'docker',
      versioningTemplate: '{{#if versioning}}{{{versioning}}}{{else}}semver{{/if}}',
    },
    {
      customType: 'regex',
      description: [
        'Raw GitHub URL Regex manager',
      ],
      managerFilePatterns: [
        '/infrastructure/.+\\.ya?ml$/',
        '/kubernetes/.+\\.ya?ml$/',
      ],
      matchStrings: [
        'https:\\/\\/raw.githubusercontent.com\\/(?<depName>[\\w\\d\\-_]+\\/[\\w\\d\\-_]+)\\/(?<currentValue>[\\w\\d\\.\\-_]+)\\/.*',
      ],
      datasourceTemplate: 'github-releases',
      versioningTemplate: 'semver',
    },
  ],
  packageRules: [
    {
      description: 'Use custom versioning for dsmr-reader',
      matchDatasources: [
        'docker',
      ],
      matchPackageNames: [
        'xirixiz/dsmr-reader-docker',
      ],
      versioning: 'regex:^(?<compatibility>.*)-(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)-(?<build>\\d+\\.\\d+\\.\\d+)$',
    },
    {
      description: 'Use custom versioning for Vector',
      matchDatasources: [
        'docker',
      ],
      matchPackageNames: [
        'docker.io/timberio/vector',
      ],
      versioning: 'regex:^(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)-(?<compatibility>.*)$',
    },
    {
      description: 'Use custom versioning for Minio',
      matchDatasources: [
        'docker',
      ],
      versioning: 'regex:^RELEASE\\.(?<major>\\d+)-(?<minor>\\d+)-(?<patch>\\d+)T.*Z(-(?<compatibility>.*))?$',
      matchPackageNames: [
        'quay.io/minio/minio',
      ],
    },
    {
      matchDatasources: [
        'docker',
      ],
      matchPackageNames: [
        'ghcr.io/onedr0p/plex',
        'ghcr.io/onedr0p/qbittorrent',
      ],
      versioning: 'loose',
    },
    {
      matchDatasources: [
        'docker',
      ],
      matchPackageNames: [
        'tomsquest/docker-radicale',
      ],
      versioning: 'pep440',
    },
  ],
}
