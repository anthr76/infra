---
# k port-forward -n home svc/frigate 5000:5000
## yaml-language-server: $schema=http://localhost:5000/api/config/schema
mqtt:
  host: mosquitto
  topic_prefix: frigate
  user: user
  password: "{FRIGATE_MQTT_PASSWORD}"
rtmp:
  enabled: true
ffmpeg:
  global_args:
    - -hide_banner
    - -loglevel
    - warning
  hwaccel_args:
    - -hwaccel
    - vaapi
    - -hwaccel_device
    - /dev/dri/renderD128
    - -hwaccel_output_format
    - yuv420p
  output_args:
    record: -f segment -segment_time 10 -segment_format mp4 -reset_timestamps 1 -strftime 1 -c:v copy -c:a aac
    rtmp: -c:v copy -f flv -ar 44100 -c:a aac
database:
  path: /data/frigate.db
detectors:
  coral:
    type: edgetpu
    device: usb
objects:
  track:
    - person
    - cat
    - dog
  filters:
    person:
      threshold: 0.90
    car:
      threshold: 0.85
snapshots:
  enabled: true
  timestamp: false
  bounding_box: true
  retain:
    default: 7
record:
  enabled: true
  retain:
    days: 2
    mode: motion
  events:
    retain:
      default: 5
      mode: active_objects
cameras:
  frigate_front_porch:
    ffmpeg:
      inputs:
        - path: rtsp://frigate:frigate!@front-porch-camera:554/cam/realmonitor?channel=1&subtype=0
          roles:
            - record
            - rtmp
        - path: rtsp://frigate:frigate!@front-porch-camera:554/cam/realmonitor?channel=1&subtype=2
          roles:
            - detect
    detect:
      width: 1920
      height: 1080
      fps: 5
    zones:
      front_yard:
        coordinates: 1280,720,1280,158,0,194,0,720
      street:
        coordinates: 0,0,1280,0,1280,153,0,174,0,122
    motion:
      mask:
        - 792,66,1226,72,1223,21,800,24
  frigate_back_porch:
    ffmpeg:
      inputs:
        - path: rtsp://frigate:frigate!@back-porch-camera:554/cam/realmonitor?channel=1&subtype=0
          roles:
            - record
            - rtmp
        - path: rtsp://frigate:frigate!@back-porch-camera:554/cam/realmonitor?channel=1&subtype=2
          roles:
            - detect
    detect:
      width: 1920
      height: 1080
      fps: 5
    motion:
      mask:
        - 581,332,465,317,495,0,578,0
        - 986,0,864,617,951,655,1280,80
        - 1221,26,1222,66,789,64,792,21
    zones:
      stairs:
        coordinates: 767,720,963,604,841,312,498,610
      porch:
        coordinates: 0,0,53,474,349,720,835,332,881,247,899,0
  # --
  frigate_back_yard:
    ffmpeg:
      inputs:
        - path: rtsp://frigate:frigate!@back-yard-camera:554/cam/realmonitor?channel=1&subtype=0
          roles:
            - record
            - rtmp
        - path: rtsp://frigate:frigate!@back-yard-camera:554/cam/realmonitor?channel=1&subtype=2
          roles:
            - detect
    detect:
      width: 1920
      height: 1080
      fps: 5
    motion:
      mask:
        - 809,720,363,720,349,427,472,115,513,0,500,0,621,0,813,395
        - 1226,28,1217,68,797,70,799,28
        - 0,0,401,0,403,50,0,160
    objects:
      track:
        - person
        - car
    zones:
      driveway:
        coordinates: 0,720,0,337,360,137,551,133,364,720
      alley:
        coordinates: 33,129,76,69,584,73,628,137

