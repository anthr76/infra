---
apiVersion: metal.sidero.dev/v1alpha1
kind: Server
metadata:
  name: 00000000-0000-0000-0000-d05099defa93
  namespace: default
spec:
  accepted: true
  hostname: worker-01.scr1.rabbito.tech
  configPatches:
    - op: add
      path: /machine/install/extensions
      value:
        - image: ghcr.io/siderolabs/amd-ucode:20220411
    - op: add
      path: /machine/network/hostname
      value: worker-01.scr1.rabbito.tech
    - op: add
      path: /machine/sysctls
      value:
        fs.inotify.max_user_watches: "1048576"
        fs.inotify.max_user_instances: "8192"
        vm.max_map_count: "524288"
        net.ipv6.conf.eth2.accept_ra: "2"
        user.max_user_namespaces: "1500"
  #    - op: add
  #      path: /machine/kernel
  #      value:
  #        modules:
  #          - name: drm
  #          - name: amdgpu
  bmc:
    endpoint: worker-1-bmc.scr1.rabbito.tech
    userFrom:
      secretKeyRef:
        name: ipmi-credentials
        namespace: default
        key: asrock-username
    passFrom:
      secretKeyRef:
        name: ipmi-credentials
        namespace: default
        key: asrock-password
  cpu:
    manufacturer: Advanced Micro Devices, Inc.
    version: AMD Ryzen 5 PRO 2400GE w/ Radeon Vega Graphics
  system:
    family: Unknown
    manufacturer: Unknown
    productName: Unknown
    serialNumber: Unknown
    skuNumber: Unknown
    version: Unknown
