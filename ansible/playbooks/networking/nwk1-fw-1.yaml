---
- name: Configure switch
  hosts: 'nwk1-fw-1.int.rabbito.tech'
  tasks:

  - name: Configure interfaces
    vyos.vyos.vyos_interfaces:
      config:
      - name: eth0
        description: 'OUTSIDE'
        enabled: true
      - name: eth1
        description: 'INSIDE'
        vifs:
        - vlan_id: 10
          description: 'VLAN_10'
        - vlan_id: 99
          description: 'VLAN_99'
        - vlan_id: 100
          description: 'VLAN_100'
        - vlan_id: 101
          description: 'VLAN_101'

  - name: configure interface addresses
    vyos.vyos.vyos_config:
      lines:
      - set interfaces ethernet eth0 address 'dhcp'
      - set interfaces ethernet eth1 address '192.168.0.1/24'
      - set interfaces ethernet eth1 vif 10 address '192.168.4.1/24'
      - set interfaces ethernet eth1 vif 99 address '10.20.99.1/24'
      - set interfaces ethernet eth1 vif 100 address '192.168.3.1/24'
      - set interfaces ethernet eth1 vif 101 address '192.168.2.1/24'
