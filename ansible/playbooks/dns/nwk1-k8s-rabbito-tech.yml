---
- name: Configure DNS
  hosts: localhost
  tasks:

    - name: 'nwk1-master-01 provision'
      community.general.ipa_dnsrecord:
        state: present
        zone_name: k8s.rabbito.tech
        record_type: 'A'
        record_name: 'nwk1-master-01'
        record_value: '192.168.4.19'

    - name: 'nwk1-master-02 provision'
      community.general.ipa_dnsrecord:
        state: present
        zone_name: k8s.rabbito.tech
        record_type: 'A'
        record_name: 'nwk1-master-02'
        record_value: '192.168.4.18'

    - name: 'nwk1-master-03 provision'
      community.general.ipa_dnsrecord:
        state: present
        zone_name: k8s.rabbito.tech
        record_type: 'A'
        record_name: 'nwk1-master-03'
        record_value: '192.168.4.17'

    - name: 'nwk1-worker-01 provision'
      community.general.ipa_dnsrecord:
        state: present
        zone_name: k8s.rabbito.tech
        record_type: 'A'
        record_name: 'nwk1-worker-01'
        record_value: '192.168.4.20'

    - name: 'nwk1-worker-02 provision'
      community.general.ipa_dnsrecord:
        state: present
        zone_name: k8s.rabbito.tech
        record_type: 'A'
        record_name: 'nwk1-worker-02'
        record_value: '192.168.4.10'

    - name: 'nwk1 load balancer provision'
      community.general.ipa_dnsrecord:
        state: present
        zone_name: k8s.rabbito.tech
        record_type: 'A'
        record_name: 'nwk1-fwlb-1'
        record_value: '192.168.0.2'

    - name: 'nwk1 api lb provision'
      community.general.ipa_dnsrecord:
        state: present
        zone_name: k8s.rabbito.tech
        record_type: 'CNAME'
        record_name: 'nwk1-api'
        record_value: 'nwk1-fw-lb1'

    - name: 'nwk1 etcd lb provision'
      community.general.ipa_dnsrecord:
        state: present
        zone_name: k8s.rabbito.tech
        record_type: 'CNAME'
        record_name: 'nwk1-etcd'
        record_value: 'nwk1-fw-lb1'
